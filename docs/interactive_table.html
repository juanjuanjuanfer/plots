
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Producción de agrodiversos 2025</title>
    <link rel="stylesheet" 
          href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <style>
        .selected {
            background-color: yellow !important;
        }
        .column-toggle {
            margin: 10px 0;
            padding: 10px;
            background: #f0f0f0;
        }
        .column-toggle label {
            margin-right: 15px;
        }
    </style>
</head>
<body>
    <h2>Seguimiento de la producción de agrodiversos 2025</h2>
    <ul>
        <li><a href="index.html">Menú principal</a></li>
    </ul>
    
    <!-- Column visibility toggles -->
    <div class="column-toggle">
        <strong>Mostrar columnas:</strong>
        <label><input type="checkbox" class="toggle-col" data-column="0" checked> producto</label><label><input type="checkbox" class="toggle-col" data-column="1" checked> cantidad_cosecha</label><label><input type="checkbox" class="toggle-col" data-column="2" checked> cantidad_comercializar</label><label><input type="checkbox" class="toggle-col" data-column="3" checked> fecha_cosecha</label><label><input type="checkbox" class="toggle-col" data-column="4" checked> comunidad</label><label><input type="checkbox" class="toggle-col" data-column="5" checked> productor</label>
    </div>

    <!-- Date filter -->
    <div class="date-filter">
        <label for="start-date">Desde:</label>
        <input type="text" id="start-date" class="datepicker">
        <label for="end-date">Hasta:</label>
        <input type="text" id="end-date" class="datepicker">
        <button id="filter-date">Filtrar</button>
    </div>

    <table id="prodagro2025" class="display">
        <thead>
            <tr>
                <th>producto</th><th>cantidad_cosecha</th><th>cantidad_comercializar</th><th>fecha_cosecha</th><th>comunidad</th><th>productor</th>
            </tr>
        </thead>
        <tbody>
            <tr onclick="toggleRow(this)"><td>Anona (kg)</td><td>10.0</td><td>8.0</td><td>15-05-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Caimito (Pieza)</td><td>50.0</td><td>50.0</td><td>15-05-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Camote blanco (kg)</td><td>50.0</td><td>30.0</td><td>31-03-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Camote morado (kg)</td><td>40.0</td><td>40.0</td><td>31-03-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Chile habanero (kg)</td><td>10.0</td><td>10.0</td><td>30-04-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Cilantro  (Atado)</td><td>20.0</td><td>20.0</td><td>30-04-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Elote (Pieza)</td><td>500.0</td><td>300.0</td><td>31-10-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Frijol xcolibul (kg)</td><td>50.0</td><td>50.0</td><td>30-04-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Guaya (kg)</td><td>20.0</td><td>20.0</td><td>30-06-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Ibes (kg)</td><td>60.0</td><td>60.0</td><td>28-02-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Limón indio (kg)</td><td>40.0</td><td>30.0</td><td>31-07-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Limón persa (kg)</td><td>20.0</td><td>20.0</td><td>30-06-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Macal (kg)</td><td>15.0</td><td>15.0</td><td>11-02-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Mango ataulfo (kg)</td><td>50.0</td><td>50.0</td><td>31-07-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Mango mangloba (kg)</td><td>40.0</td><td>40.0</td><td>31-07-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Mango pico de loro (kg)</td><td>10.0</td><td>10.0</td><td>31-07-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Nance (kg)</td><td>3.0</td><td>3.0</td><td>02-09-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Naranja agria (kg)</td><td>20.0</td><td>20.0</td><td>31-07-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Naranja agria (kg)</td><td>20.0</td><td>20.0</td><td>27-12-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Naranja dulce (kg)</td><td>50.0</td><td>50.0</td><td>31-10-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>20.0</td><td>20.0</td><td>30-04-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>20.0</td><td>20.0</td><td>30-06-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Saramullo (kg)</td><td>8.0</td><td>8.0</td><td>30-12-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Tamarindo (kg)</td><td>50.0</td><td>50.0</td><td>29-10-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Toronja roja (kg)</td><td>30.0</td><td>30.0</td><td>31-08-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Zapote (Pieza)</td><td>50.0</td><td>50.0</td><td>30-06-2025</td><td>tixcacaltuyub</td><td>pascuala_yama_xix</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>5.0</td><td>2.0</td><td>10-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Cilantro  (Atado)</td><td>3.0</td><td>2.0</td><td>10-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Lechuga local (Pieza)</td><td>1.0</td><td>1.0</td><td>10-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Arúgula (kg)</td><td>0.2</td><td>0.2</td><td>10-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Tomate rosapak (kg)</td><td>2.0</td><td>1.0</td><td>10-04-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>0.5</td><td>0.5</td><td>10-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>0.5</td><td>0.25</td><td>10-04-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Oregano Castilla (kg)</td><td>1.0</td><td>0.4</td><td>17-02-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Oregano Castilla (kg)</td><td>1.0</td><td>0.2</td><td>10-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>0.5</td><td>0.25</td><td>17-02-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>0.5</td><td>0.25</td><td>10-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Naranja agria (kg)</td><td>2.0</td><td>1.5</td><td>10-05-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Naranja agria (kg)</td><td>2.0</td><td>1.5</td><td>10-08-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Naranja dulce (kg)</td><td>2.0</td><td>1.5</td><td>10-05-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Mango mangloba (kg)</td><td>3.0</td><td>2.0</td><td>10-06-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Mango ataulfo (kg)</td><td>3.0</td><td>2.0</td><td>10-06-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Ciruela mixta (kg)</td><td>3.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Limón país (Indio) (kg)</td><td>2.0</td><td>1.0</td><td>10-05-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Espinaca malabar (kg)</td><td>0.4</td><td>0.2</td><td>10-05-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Chile Mixto (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-02-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-03-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-04-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-05-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-06-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-06-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-07-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-08-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-09-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-10-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-11-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>30.0</td><td>15.0</td><td>17-12-2025</td><td>yaxunah</td><td>landi_chan</td></tr><tr onclick="toggleRow(this)"><td>Calabaza (kg)</td><td>3.0</td><td>1.5</td><td>10-04-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Calabaza (kg)</td><td>2.0</td><td>1.0</td><td>15-06-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>6.0</td><td>2.0</td><td>10-03-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>4.0</td><td>2.0</td><td>10-04-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Naranja agria (kg)</td><td>5.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Mamey (kg)</td><td>5.0</td><td>3.0</td><td>10-04-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Zapote Negro (Pieza)</td><td>5.0</td><td>2.0</td><td>10-08-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Mango tomy (kg)</td><td>6.0</td><td>4.0</td><td>10-08-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Mango pico de loro (kg)</td><td>2.0</td><td>1.0</td><td>10-08-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Ciruela mixta (kg)</td><td>5.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Piñuela (Pieza)</td><td>50.0</td><td>25.0</td><td>15-02-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Limón mixto (kg)</td><td>7.0</td><td>3.0</td><td>10-05-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Tomate rosapak (kg)</td><td>4.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Tomate rosapak (kg)</td><td>2.0</td><td>1.0</td><td>30-06-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Chile Mixto (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-02-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-03-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-04-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-05-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-06-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-06-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Lechuga local (Pieza)</td><td>2.0</td><td>1.0</td><td>10-03-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Lechuga local (Pieza)</td><td>2.0</td><td>1.0</td><td>10-04-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Betabel (kg)</td><td>0.5</td><td>0.25</td><td>30-06-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Arúgula (kg)</td><td>2.0</td><td>1.0</td><td>10-04-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Lechuga orejona (Pieza)</td><td>6.0</td><td>3.0</td><td>30-06-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Pepita molida (kg)</td><td>2.0</td><td>0.5</td><td>15-02-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Ibes (kg)</td><td>3.0</td><td>1.0</td><td>15-02-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Frijol xcolibul (kg)</td><td>3.0</td><td>1.0</td><td>15-02-2025</td><td>yaxunah</td><td>rubi_canul</td></tr><tr onclick="toggleRow(this)"><td>Espinaca malabar (kg)</td><td>1.0</td><td>0.5</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Espinaca malabar (kg)</td><td>2.0</td><td>0.5</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Lechuga local (Pieza)</td><td>50.0</td><td>20.0</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Lechuga local (Pieza)</td><td>50.0</td><td>20.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Lechuga local (Pieza)</td><td>50.0</td><td>20.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Lechuga italiana (Pieza)</td><td>50.0</td><td>20.0</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Lechuga italiana (Pieza)</td><td>50.0</td><td>20.0</td><td>10-03-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Lechuga italiana (Pieza)</td><td>50.0</td><td>20.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>1.0</td><td>0.5</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>1.0</td><td>0.5</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>1.0</td><td>0.5</td><td>10-06-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>1.0</td><td>0.5</td><td>10-08-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Tomate rosapak (kg)</td><td>1.0</td><td>0.5</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Tomate rosapak (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Tomate rosapak (kg)</td><td>1.0</td><td>0.5</td><td>10-07-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Tomate mixto (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Tomate mixto (kg)</td><td>1.0</td><td>0.5</td><td>10-08-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Acelga (kg)</td><td>1.0</td><td>0.5</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Arúgula (kg)</td><td>1.0</td><td>0.5</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Arúgula (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cilantro  (Atado)</td><td>10.0</td><td>5.0</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cilantro  (Atado)</td><td>10.0</td><td>5.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cilantro  (Atado)</td><td>10.0</td><td>5.0</td><td>10-07-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cilantro  (Atado)</td><td>10.0</td><td>5.0</td><td>10-10-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>10.0</td><td>5.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>10.0</td><td>5.0</td><td>10-07-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>10.0</td><td>5.0</td><td>10-08-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chile Mixto (kg)</td><td>0.5</td><td>0.25</td><td>15-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chile Mixto (kg)</td><td>0.5</td><td>0.25</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chile Mixto (kg)</td><td>0.5</td><td>0.25</td><td>10-06-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Naranja agria (kg)</td><td>5.0</td><td>2.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Naranja dulce (kg)</td><td>5.0</td><td>2.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Limón persa (kg)</td><td>5.0</td><td>2.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Achiote (kg)</td><td>3.0</td><td>1.5</td><td>10-03-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Pepita molida (kg)</td><td>5.0</td><td>2.0</td><td>13-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>10-06-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>10-08-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>10-10-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Pepino (kg)</td><td>4.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Ibes (kg)</td><td>5.0</td><td>1.0</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Frijol xcolibul (kg)</td><td>5.0</td><td>1.0</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Albahaca (kg)</td><td>0.5</td><td>0.25</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Cebollita de ixil (kg)</td><td>2.0</td><td>1.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Epazote (kg)</td><td>0.5</td><td>0.25</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hierbabuena (kg)</td><td>0.5</td><td>0.25</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Piñuela (Pieza)</td><td>50.0</td><td>25.0</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>14-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-03-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-04-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-06-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-07-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-08-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-09-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-10-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-11-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Hoja santa (Pieza)</td><td>20.0</td><td>10.0</td><td>10-12-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Mandarina (kg)</td><td>5.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Mandarina (kg)</td><td>0.0</td><td>0.0</td><td>10-02-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Toronja roja (kg)</td><td>5.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Mango mixto (kg)</td><td>5.0</td><td>2.5</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Nance (kg)</td><td>2.0</td><td>1.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Betabel (kg)</td><td>1.0</td><td>0.5</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Limón italiano (kg)</td><td>5.0</td><td>2.0</td><td>10-05-2025</td><td>yaxunah</td><td>martina_ek_chi</td></tr><tr onclick="toggleRow(this)"><td>Nopal (Pieza)</td><td>20.0</td><td>20.0</td><td>15-02-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Nopal (Pieza)</td><td>20.0</td><td>20.0</td><td>18-04-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Nopal (Pieza)</td><td>20.0</td><td>20.0</td><td>18-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Nopal (Pieza)</td><td>20.0</td><td>20.0</td><td>18-08-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Nopal (Pieza)</td><td>20.0</td><td>20.0</td><td>18-10-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>15-02-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-03-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-04-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-05-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-07-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-08-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-09-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-10-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-11-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-12-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Zacate limón (kg)</td><td>2.0</td><td>1.5</td><td>18-01-2026</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cilantro (kg)</td><td>1.5</td><td>0.5</td><td>18-02-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cilantro (kg)</td><td>1.5</td><td>0.5</td><td>18-04-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cilantro (kg)</td><td>1.5</td><td>0.5</td><td>18-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cilantro (kg)</td><td>1.5</td><td>0.5</td><td>18-08-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cilantro (kg)</td><td>1.5</td><td>0.5</td><td>18-10-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cilantro (kg)</td><td>1.5</td><td>0.5</td><td>18-12-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>8.0</td><td>4.0</td><td>18-02-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>10.0</td><td>6.0</td><td>20-04-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>10.0</td><td>6.0</td><td>20-07-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Rábano (Atado)</td><td>10.0</td><td>6.0</td><td>20-09-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Acelga (kg)</td><td>2.0</td><td>1.0</td><td>20-04-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Acelga (kg)</td><td>2.0</td><td>1.0</td><td>20-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Acelga (kg)</td><td>2.0</td><td>1.0</td><td>20-08-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Acelga (kg)</td><td>2.0</td><td>1.0</td><td>20-09-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>20-02-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>20-03-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>20-05-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Chaya (kg)</td><td>1.0</td><td>0.5</td><td>20-08-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>20-02-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>20-04-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Cebollina (kg)</td><td>1.0</td><td>0.5</td><td>20-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Espinaca malabar (kg)</td><td>1.0</td><td>0.5</td><td>20-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Espinaca malabar (kg)</td><td>1.0</td><td>0.5</td><td>20-09-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de plátano (Pieza)</td><td>20.0</td><td>10.0</td><td>20-04-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de plátano (Pieza)</td><td>20.0</td><td>10.0</td><td>20-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de plátano (Pieza)</td><td>20.0</td><td>10.0</td><td>20-08-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de plátano (Pieza)</td><td>20.0</td><td>10.0</td><td>20-10-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de naranja (kg)</td><td>2.0</td><td>1.0</td><td>20-02-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de naranja (kg)</td><td>2.0</td><td>1.0</td><td>20-03-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de naranja (kg)</td><td>2.0</td><td>1.0</td><td>20-06-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Hoja de naranja (kg)</td><td>2.0</td><td>1.0</td><td>20-08-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Lima (kg)</td><td>2.0</td><td>1.0</td><td>20-05-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr><tr onclick="toggleRow(this)"><td>Lima (kg)</td><td>2.0</td><td>1.0</td><td>20-09-2025</td><td>granada</td><td>yaneli_cahum_mejia</td></tr>
        </tbody>
        <tfoot>
            <tr>
                <th colspan="1" style="text-align:left">Totales (seleccionados):</th>
                <th id="sum_cosecha">0</th>
                <th id="sum_comercializar">0</th>
                <th class="footer-col-0"></th><th class="footer-col-1"></th>
            </tr>
        </tfoot>
    </table>

    <script>
    $(document).ready(function() {
        var table = $('#prodagro2025').DataTable();
        
        // Initialize Flatpickr
        flatpickr(".datepicker", {
            dateFormat: "d-m-Y",
            allowInput: true,
        });

        // Date filter function (corrected column index)
        $.fn.dataTable.ext.search.push(function(settings, data, dataIndex) {
            function parseDate(dateStr) {
                if (!dateStr) return null;
                var parts = dateStr.split('-');
                if (parts.length === 3) {
                    return new Date(
                        parseInt(parts[2], 10),
                        parseInt(parts[1], 10) - 1,
                        parseInt(parts[0], 10)
                    );
                }
                return null;
            }

            var rowDate = parseDate(data[3]); // fecha_cosecha at index 3
            var startDate = parseDate($("#start-date").val());
            var endDate = parseDate($("#end-date").val());

            if (!rowDate) return false;
            if (startDate && rowDate < startDate) return false;
            if (endDate && rowDate > endDate) return false;
            return true;
        });

        // Preserve row selection functionality
        $('#prodagro2025 tbody').on('click', 'tr', function() {
            $(this).toggleClass('selected');
            updateSums();
        });

        // Column visibility toggles
        $('.toggle-col').on('change', function() {
            var columnIdx = $(this).data('column');
            table.column(columnIdx).visible(this.checked);
            updateFooter();
        });

        // Update footer visibility
        function updateFooter() {
            var visibleColumns = table.columns(':visible').count();
            $('tfoot tr th').each(function(index) {
                $(this).toggle(index < visibleColumns);
            });
        }

        // Sum calculation
        function updateSums() {
            var selectedRows = $('tr.selected');
            var sumCosecha = 0;
            var sumComercializar = 0;

            if (selectedRows.length > 0) {
                selectedRows.each(function() {
                    var rowData = table.row(this).data();
                    sumCosecha += parseFloat(rowData[1]) || 0; // cantidad_cosecha
                    sumComercializar += parseFloat(rowData[2]) || 0; // cantidad_comercializar
                });
            } else {
                table.rows({ search: 'applied' }).every(function() {
                    var data = this.data();
                    sumCosecha += parseFloat(data[1]) || 0;
                    sumComercializar += parseFloat(data[2]) || 0;
                });
            }

            $('#sum_cosecha').text(sumCosecha.toFixed(2));
            $('#sum_comercializar').text(sumComercializar.toFixed(2));
        }

        // Initialize
        table.on('draw', function() {
            updateSums();
            updateFooter();
        });
        
        $("#filter-date").on("click", function() {
            table.draw();
        });

        updateFooter();
        updateSums();
    });
</script>
</body>
</html>
